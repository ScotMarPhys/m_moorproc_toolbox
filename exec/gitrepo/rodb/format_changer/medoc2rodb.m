%% load MEDOC-87 CTD files and convert to RODB format%for n=20:116  disp(n)  filename=['CTD8701',int2strv(n,0,'0',3),'D.LST;1'];  if ~exist(filename)    filename=['CTD8701',int2strv(n,1,'0',3),'D.LST;2'];  end  if ~exist(filename)    if n==60      filename=['CTD8701',int2strv(n,1,'0',3),'IID.LST;1'];    else      disp([filename,'  does not exist'])      return    end  end  fid=fopen(filename,'rt');  for k=1:25    line=fgetl(fid);  end  line=fgetl(fid);		% date, time  info=sscanf(line,'%f')';  day=floor(info(2));  month=1;  if day>60    day=day-60;    month=3;  elseif day>31    day=day-31;    month=2;  end  dat=[info(11),month,day];  time=(info(2)-floor(info(2)))*24;  time=[floor(time),floor((time-floor(time))*60)];  line=fgetl(fid);		% water depth  info=sscanf(line,'%f')';  waterdepth=info(2);  for k=1:7    line=fgetl(fid);  end  line=fgetl(fid);		% ship, cruise  ship=line(29:44);  cruise=line(56:length(line));  line=fgetl(fid);  line=fgetl(fid);		% station name  station=line(11:21);  line=fgetl(fid);		% position  latstr=line([7:8,14,10:13]);  lonstr=line([22:24,30,26:29]);  line=fgetl(fid);  line=fgetl(fid);  data=fscanf(fid,'%f');  data(1:4:length(data))=nan*data(1:4:length(data));  good=find(~isnan(data));  data=data(good);  fclose(fid);  outfile=['ci8701_',int2strv(n,1,'0',3),'.ctd'];  fid=fopen(outfile,'wt');  fprintf(fid,['Filename       = ',filename,'\n'],0);  fprintf(fid,['Shipname       = ',ship,'\n'],0);  fprintf(fid,['Cruise         = ',cruise,'\n'],0);  fprintf(fid,['Date           = ',int2str(dat(1)),'/',...				   int2strv(dat(2),1,'0',2),'/',...				   int2strv(dat(3),1,'0',2),'\n'],0);  fprintf(fid,['Time           = ',int2strv(time(1),1,'0',2),':',...				   int2strv(time(2),1,'0',2),'\n'],0);  fprintf(fid,['Station        = ',station,'\n'],0);  fprintf(fid,['Latitude       = ',latstr,'\n'],0);  fprintf(fid,['Longitude      = ',lonstr,'\n'],0);  fprintf(fid,['Waterdepth     = ',int2str(waterdepth),'\n'],0);  fprintf(fid,['Columns        = p:t:s\n'],0);  fprintf(fid,'%6.1f %7.4f %7.4f\n',data);  fclose(fid);end    